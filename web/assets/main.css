@import 'tailwindcss';
@import 'tw-animate-css';
@import '../../@tailwind-shared/index.css';
@import '@nuxt/ui';

/* Scan unraid-ui package from linked directory for class usage */
@source "../../unraid-ui/dist/**/*.{js,mjs}";
@source "../../unraid-ui/src/**/*.{vue,ts}";
@source "../**/*.{vue,ts,js}";

/* Create a CSS layer for resets with lower priority than Tailwind */
@layer base {
  /* Reset inherited styles from webgui for Unraid components */
  .unraid-reset,
  .unraid-reset *:not(svg):not(path):not(g):not(circle):not(rect):not(line):not(polyline):not(polygon):not(ellipse):not(text):not(tspan):not(stop):not(defs):not(clipPath):not(mask):not(marker):not(symbol):not(use):not(image):not(pattern) {
    /* Reset all CSS properties to browser defaults */
    all: unset;
    
    /* Restore essential properties */
    display: revert;
    box-sizing: border-box;
  }

  /* Apply isolation to non-modal components to prevent style leakage */
  .unraid-reset:not(#teleports):not(#modals):not(unraid-modals) {
    /* Create a new stacking context for style isolation */
    isolation: isolate;
  }
  
  /* Ensure SVG icons render properly - don't reset them */
  .unraid-reset svg {
    fill: currentColor;
  }
}

/* Specific resets for interactive elements to restore functionality */
.unraid-reset button,
.unraid-reset input,
.unraid-reset select,
.unraid-reset textarea {
  cursor: revert;
  /* Reset button borders that leak from webgui */
  border: none;
  background: none;
  padding: 0;
  margin: 0;
  font: inherit;
  color: inherit;
  text-align: inherit;
}

.unraid-reset a {
  cursor: pointer;
  text-decoration: revert;
}

.unraid-reset [hidden] {
  display: none !important;
}

/* Ensure modals and their backdrops appear above all other content */
[role="dialog"] {
  z-index: 99999 !important;
}

/* Modal backdrop */
.fixed.inset-0[aria-hidden="true"],
[data-headlessui-portal] .fixed.inset-0 {
  z-index: 99998 !important;
}

/* Teleport container children */
#teleports > *,
#modals > *,
unraid-modals > * {
  z-index: 99999 !important;
}

/* Portal roots from HeadlessUI */
[data-headlessui-portal] {
  position: relative;
  z-index: 99999 !important;
}
