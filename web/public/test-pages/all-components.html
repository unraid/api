<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>All Components - Unraid Component Test</title>
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <style>
    body {
      font-family: system-ui, -apple-system, sans-serif;
      margin: 0;
      padding: 20px;
      background: #f3f4f6;
    }
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }
    .component-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }
    .component-card {
      background: white;
      border-radius: 8px;
      padding: 20px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }
    .component-card h3 {
      margin: 0 0 10px 0;
      color: #1f2937;
      font-size: 16px;
      font-weight: 600;
    }
    .component-card .selector {
      font-family: monospace;
      font-size: 12px;
      color: #6b7280;
      margin-bottom: 15px;
      background: #f3f4f6;
      padding: 4px 8px;
      border-radius: 4px;
      display: inline-block;
    }
    .component-mount {
      min-height: 50px;
      border: 1px dashed #e5e7eb;
      border-radius: 4px;
      padding: 10px;
      position: relative;
    }
    .status {
      position: absolute;
      top: 5px;
      right: 5px;
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: #10b981;
    }
    .category-header {
      background: #1f2937;
      color: white;
      padding: 10px 15px;
      border-radius: 4px;
      margin: 30px 0 15px 0;
      font-weight: 600;
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Authentication & User -->
    <div class="category-header">üë§ Authentication & User</div>
    <div class="component-grid">
      <div class="component-card">
        <h3>Authentication</h3>
        <span class="selector">&lt;unraid-auth&gt;</span>
        <div class="component-mount">
          <unraid-auth></unraid-auth>
        </div>
      </div>

      <div class="component-card">
        <h3>User Profile</h3>
        <span class="selector">&lt;unraid-user-profile&gt;</span>
        <div class="component-mount">
          <unraid-user-profile></unraid-user-profile>
        </div>
      </div>

      <div class="component-card">
        <h3>SSO Button</h3>
        <span class="selector">&lt;unraid-sso-button&gt;</span>
        <div class="component-mount">
          <unraid-sso-button></unraid-sso-button>
        </div>
      </div>

      <div class="component-card">
        <h3>Registration</h3>
        <span class="selector">&lt;unraid-registration&gt;</span>
        <div class="component-mount">
          <unraid-registration></unraid-registration>
        </div>
      </div>
    </div>

    <!-- System & Settings -->
    <div class="category-header">‚öôÔ∏è System & Settings</div>
    <div class="component-grid">
      <div class="component-card">
        <h3>Connect Settings</h3>
        <span class="selector">&lt;unraid-connect-settings&gt;</span>
        <div class="component-mount">
          <unraid-connect-settings></unraid-connect-settings>
        </div>
      </div>

      <div class="component-card">
        <h3>Theme Switcher</h3>
        <span class="selector">&lt;unraid-theme-switcher&gt;</span>
        <div class="component-mount">
          <unraid-theme-switcher current="white"></unraid-theme-switcher>
        </div>
      </div>

      <div class="component-card">
        <h3>Header OS Version</h3>
        <span class="selector">&lt;unraid-header-os-version&gt;</span>
        <div class="component-mount">
          <unraid-header-os-version></unraid-header-os-version>
        </div>
      </div>

      <div class="component-card">
        <h3>WAN IP Check</h3>
        <span class="selector">&lt;unraid-wan-ip-check&gt;</span>
        <div class="component-mount">
          <unraid-wan-ip-check php-wan-ip="192.168.1.1"></unraid-wan-ip-check>
        </div>
      </div>
    </div>

    <!-- OS Management -->
    <div class="category-header">üíø OS Management</div>
    <div class="component-grid">
      <div class="component-card">
        <h3>Update OS</h3>
        <span class="selector">&lt;unraid-update-os&gt;</span>
        <div class="component-mount">
          <unraid-update-os></unraid-update-os>
        </div>
      </div>

      <div class="component-card">
        <h3>Downgrade OS</h3>
        <span class="selector">&lt;unraid-downgrade-os&gt;</span>
        <div class="component-mount">
          <unraid-downgrade-os></unraid-downgrade-os>
        </div>
      </div>
    </div>

    <!-- API & Developer -->
    <div class="category-header">üîß API & Developer</div>
    <div class="component-grid">
      <div class="component-card">
        <h3>API Key Manager</h3>
        <span class="selector">&lt;unraid-api-key-manager&gt;</span>
        <div class="component-mount">
          <unraid-api-key-manager></unraid-api-key-manager>
        </div>
      </div>

      <div class="component-card">
        <h3>API Key Authorize</h3>
        <span class="selector">&lt;unraid-api-key-authorize&gt;</span>
        <div class="component-mount">
          <unraid-api-key-authorize></unraid-api-key-authorize>
        </div>
      </div>

      <div class="component-card">
        <h3>Download API Logs</h3>
        <span class="selector">&lt;unraid-download-api-logs&gt;</span>
        <div class="component-mount">
          <unraid-download-api-logs></unraid-download-api-logs>
        </div>
      </div>

      <div class="component-card">
        <h3>Log Viewer</h3>
        <span class="selector">&lt;unraid-log-viewer&gt;</span>
        <div class="component-mount">
          <unraid-log-viewer></unraid-log-viewer>
        </div>
      </div>
    </div>

    <!-- UI Components -->
    <div class="category-header">üé® UI Components</div>
    <div class="component-grid">
      <div class="component-card">
        <h3>Modals</h3>
        <span class="selector">&lt;unraid-modals&gt;</span>
        <div class="component-mount">
          <unraid-modals></unraid-modals>
        </div>
      </div>

      <div class="component-card">
        <h3>Welcome Modal</h3>
        <span class="selector">&lt;unraid-welcome-modal&gt;</span>
        <div class="component-mount">
          <unraid-welcome-modal></unraid-welcome-modal>
        </div>
      </div>

      <div class="component-card">
        <h3>Dev Modal Test</h3>
        <span class="selector">&lt;unraid-dev-modal-test&gt;</span>
        <div class="component-mount">
          <unraid-dev-modal-test></unraid-dev-modal-test>
        </div>
      </div>

      <div class="component-card">
        <h3>Toaster</h3>
        <span class="selector">&lt;unraid-toaster&gt;</span>
        <div class="component-mount">
          <unraid-toaster></unraid-toaster>
        </div>
      </div>
    </div>

    <!-- Test Controls -->
    <div class="category-header">üéÆ Test Controls</div>
    <div style="background: white; padding: 20px; border-radius: 8px; margin-top: 15px;">
      <h3>jQuery Interaction Tests</h3>
      <div style="display: flex; gap: 10px; flex-wrap: wrap; margin-top: 15px;">
        <button id="test-notification" class="test-btn">Trigger Notification</button>
        <button id="test-modal" class="test-btn">Open Test Modal</button>
        <button id="test-theme" class="test-btn">Toggle Theme</button>
        <button id="test-update-profile" class="test-btn">Update Profile Data</button>
        <button id="test-settings" class="test-btn">Update Settings</button>
      </div>
      
      <div style="margin-top: 20px;">
        <h4>Console Output</h4>
        <div id="test-output" style="background: #1f2937; color: #10b981; padding: 10px; border-radius: 4px; font-family: monospace; font-size: 12px; min-height: 100px; max-height: 200px; overflow-y: auto;">
          > Ready for testing...
        </div>
      </div>
    </div>
  </div>

  <style>
    .test-btn {
      padding: 8px 16px;
      background: #3b82f6;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
    }
    .test-btn:hover {
      background: #2563eb;
    }
  </style>

  <!-- Load the manifest and inject resources -->
  <script src="/test-pages/load-manifest.js"></script>
  <script src="/test-pages/test-server-state.js"></script>
  <script src="/test-pages/shared-header.js"></script>

  <!-- Test interactions -->
  <script>
    $(document).ready(function() {
      const output = $('#test-output');
      
      function log(message) {
        // Use shared header's testLog if available, otherwise local log
        if (window.testLog) {
          window.testLog(message);
        }
        if (output.length) {
          const timestamp = new Date().toLocaleTimeString();
          output.append('\n> [' + timestamp + '] ' + message);
          output.scrollTop(output[0].scrollHeight);
        }
      }
      
      // Test notification
      $('#test-notification').on('click', function() {
        log('Triggering notification...');
        const event = new CustomEvent('unraid:notification', {
          detail: { 
            title: 'Test Notification', 
            message: 'This is a test from jQuery!', 
            type: 'success' 
          }
        });
        document.dispatchEvent(event);
      });
      
      // Test modal
      $('#test-modal').on('click', function() {
        log('Opening test modal...');
        // This would trigger the modal system
        window.dispatchEvent(new CustomEvent('unraid:open-modal', {
          detail: { modalId: 'test-modal' }
        }));
      });
      
      // Test theme toggle
      $('#test-theme').on('click', function() {
        log('Toggling theme...');
        const currentTheme = $('body').hasClass('dark') ? 'light' : 'dark';
        $('body').toggleClass('dark');
        log('Theme changed to: ' + currentTheme);
      });
      
      // Test profile update
      $('#test-update-profile').on('click', function() {
        log('Updating profile data...');
        const profileData = {
          name: 'Test User ' + Math.floor(Math.random() * 100),
          email: 'test' + Math.floor(Math.random() * 100) + '@example.com',
          username: 'testuser'
        };
        $('unraid-user-profile').attr('server', JSON.stringify(profileData));
        log('Profile updated: ' + JSON.stringify(profileData));
      });
      
      // Test settings update
      $('#test-settings').on('click', function() {
        log('Updating connect settings...');
        const settings = {
          enabled: Math.random() > 0.5,
          url: 'https://connect.unraid.net',
          lastSync: new Date().toISOString()
        };
        $('unraid-connect-settings').attr('initial-settings', JSON.stringify(settings));
        log('Settings updated: ' + JSON.stringify(settings));
      });
      
      // Listen for component events
      $(document).on('unraid:theme-changed', function(e, data) {
        log('Theme changed event received: ' + JSON.stringify(data));
      });
      
      $(document).on('unraid:settings-saved', function(e, data) {
        log('Settings saved event received: ' + JSON.stringify(data));
      });
      
      log('Test page initialized - all components loaded');
    });
  </script>
</body>
</html>